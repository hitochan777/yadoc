box: python:3.7
build:
  steps:
    - pip-install
        requiremens_file: ""
        packages_list: "pipenv"

    - script:
        name: pipenv install
        code: pipenv install

    # # This pip-install clears the local wheel cache
    # - pip-install:
    #     clean_wheel_dir: true

    - script:
        name: lint
        code: pipenv run lint

    - script:
        name: type check
        code: pipenv run type-check

    - script:
        name: test
        code: |
            pipenv run python -m unittest src/**/*_test.py

    - script:
        name: coverage
        code: pipenv run codecov --token=$CODECOV_TOKEN
